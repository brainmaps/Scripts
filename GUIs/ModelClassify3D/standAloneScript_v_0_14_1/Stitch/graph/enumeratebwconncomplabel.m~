function enumlabcube = enumeratebwconncomplabel(cube, docdir)
%ENUMERATEBWCONNCOMPLABEL Labels cubes, but no two labels (in an entire
%Knossos directory) are repeated. May require the path to a doc directory
%   Ready for use with cubeprocessor.

%---BACKUP---
% %defaults (hardwire for use with cubeprocessor)
% if ~exist('docdir', 'var')
%     docdirgiven = false;
% else
%     docdirgiven = true;
% end
% 
% if docdirgiven
%     %Saves a global label counter (glc) to a temporary file. Load that file if
%     %it exists.
%     try
%         wherewasi = pwd;
%         cd(docdir)
%         load tempdat
%         cd(wherewasi)
%     catch
%     end
% end
%---END---

%check if glc is loaded. If not, initialize. 
if ~exist('glc', 'var')
    global glc; %#ok<TLEV>
    glc = 0;
end

%update labels
cube(~(cube == 0)) = cube(~(cube == 0)) + glc; 

%calculate new glc, but only when labcube isn't empty (the counter gets
%resetted to 0 otherwise)
if max(cube(:)) ~= 0
    glc = max(cube(:));
end

%---BACKUP---
% %save glc
% save tempdat glc
%---END---

enumlabcube = cube;

end

